<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smooth Auto Slide Gallery</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.css">
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  .container {
    width: 75%; height: 100vh; margin:auto;
    display:flex; align-items:center; gap:16px; padding:20px;
  }
  .imgs-container {
    display:flex; gap:10px; overflow:hidden;
  }
  .imgs-container img {
    width:150px; height:150px; object-fit:cover; flex-shrink:0; border-radius:8px;
  }
  .bi { font-size:36px; cursor:pointer; user-select:none; }
</style>
</head>
<body>
<div class="container">
  <i class="bi bi-chevron-left" id="left"></i>
  <div class="imgs-container" id="imgsContainer"></div>
  <i class="bi bi-chevron-right" id="right"></i>
</div>

<script>
const imgContainer = document.getElementById("imgsContainer");
const left = document.getElementById("left");
const right = document.getElementById("right");
const api = "https://picsum.photos/v2/list?page=1&limit=10";
let scrollAmount = 160; // width + gap
let scrollInterval;

// Fetch images and initialize
const fetchImg = async () => {
  try {
    let res = await fetch(api);
    let data = await res.json();
    appendImg(data);
    startAutoScroll();
  } catch(e){ console.log(e); }
};
fetchImg();

function appendImg(val){
  val.forEach(el=>{
    const img = document.createElement("img");
    img.src = el.download_url;
    imgContainer.append(img);
  });
  // Duplicate all images for seamless looping
  val.forEach(el=>{
    const img = document.createElement("img");
    img.src = el.download_url;
    imgContainer.append(img);
  });
}

// Arrow buttons
right.addEventListener("click", ()=> scrollByAmount(scrollAmount));
left.addEventListener("click", ()=> scrollByAmount(-scrollAmount));

function scrollByAmount(amount){
  imgContainer.scrollBy({ left: amount, behavior: "smooth" });
  setTimeout(seamlessCheck, 300); // check after smooth scroll
}

// Auto-scroll one image at a time
function startAutoScroll(){
  scrollInterval = setInterval(()=>{
    imgContainer.scrollBy({ left: scrollAmount, behavior: "smooth" });
    setTimeout(seamlessCheck, 300);
  }, 2000);
}

// Seamless loop adjustment
function seamlessCheck(){
  const scrollWidth = imgContainer.scrollWidth / 2; // only original images
  if(imgContainer.scrollLeft >= scrollWidth){
    imgContainer.scrollLeft -= scrollWidth;
  }
  if(imgContainer.scrollLeft < 0){
    imgContainer.scrollLeft += scrollWidth;
  }
}

// Pause on hover
imgContainer.addEventListener("mouseenter", ()=> clearInterval(scrollInterval));
imgContainer.addEventListener("mouseleave", ()=> startAutoScroll());
</script>
</body>
</html>
